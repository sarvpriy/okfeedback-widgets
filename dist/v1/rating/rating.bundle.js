({487:function(){var e,t=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var o,n,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(o)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(r=0)),r;)try{if(o=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(6===s[0]&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],n=0}finally{o=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},n={widgetId:window.okfeedbackid,widgetType:"rating",response:{},source:{url:window.location.href,browser:(e=navigator.userAgent,e.match(/chrome|chromium|crios/i)?"chrome":e.match(/firefox|fxios/i)?"firefox":e.match(/safari/i)?"safari":e.match(/opr\//i)?"opera":e.match(/edg/i)?"edge":"No browser detection"),userAgent:window.navigator.userAgent}},a=function(){function e(e){var t=e.widgetPosition,o=e.headingText,n=e.greetingMessage,a=e.takeEmail;"localhost:3000"===window.location.host&&console.log("Rating widget initiated"),this.widgetPosition=t,this.headingText=o,this.greetingMessage=n,this.takeEmail=a,this.createFeedbackModal(),this.createEmojiContainer(),this.feedbackModal.appendChild(Object.assign(document.createElement("div"),{id:"powered-by",innerHTML:'‚ö° by <a href="https://www.okfeedback.io" style="color: blue;font-weight: 600;" target="_blank" >Okfeedback.io</a>',style:"font-size: 12px;margin-top:12px"}))}return e.prototype.createFeedbackModal=function(){this.feedbackModal=document.createElement("div"),this.feedbackModal.classList.add("modal"),this.feedbackModal.style.display="none",this.feedbackModal.style.position="fixed",this.feedbackModal.style.bottom="80px",this.feedbackModal.style.right="10%",this.feedbackModal.style.zIndex="9999",this.feedbackModal.style.backgroundColor="#fefefe",this.feedbackModal.style.padding="20px",this.feedbackModal.style.borderRadius="4px",this.feedbackModal.style.width="300px",this.feedbackModal.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",document.body.appendChild(this.feedbackModal),this.createCloseButton()},e.prototype.createCloseButton=function(){var e=this,t=document.createElement("span");t.classList.add("close"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">\n    <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>\n  </svg>',t.style.float="right",t.style.fontSize="20px",t.style.fontWeight="bold",t.style.cursor="pointer",t.addEventListener("click",(function(){e.feedbackModal.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(10%)"}],{duration:300,easing:"ease-in-out"}),setTimeout((function(){e.feedbackModal.style.display="none"}),300)})),this.feedbackModal.appendChild(t)},e.prototype.createEmojiContainer=function(){var e=this,t=document.createElement("div");t.classList.add("emoji-container"),t.style.display="flex",t.style.justifyContent="space-around",[{emoji:"üòû",label:"1"},{emoji:"üòï",label:"2"},{emoji:"üòê",label:"3"},{emoji:"üòä",label:"4"},{emoji:"üòÉ",label:"5"}].forEach((function(e){var o=document.createElement("button");o.classList.add("emoji"),o.textContent=e.emoji,o.setAttribute("aria-label",e.label),o.setAttribute("size","38"),o.style.fontSize="32px",o.style.transition="transform 0.3s ease",o.addEventListener("mouseenter",(function(){o.style.transform="scale(1.2)"})),o.addEventListener("mouseleave",(function(){o.style.transform="scale(1)"})),t.appendChild(o)})),t.addEventListener("click",(function(t){return e.handleEmojiSelection(t)})),this.emojiFormContainer=document.createElement("div"),this.emojiFormContainer.classList.add("emoji-form-container"),this.createHeading(),this.emojiFormContainer.appendChild(t),this.feedbackModal.appendChild(this.emojiFormContainer)},e.prototype.createHeading=function(){var e=document.createElement("h2");e.textContent=this.headingText||"Give Review",e.style.marginBottom="20px",e.style.fontSize="18px",e.style.fontWeight="bold",this.emojiFormContainer.appendChild(e)},e.prototype.handleEmojiSelection=function(e){var t=e.target.textContent,o=e.target.getAttribute("aria-label");"localhost:3000"===window.location.host&&console.log(t,o),n.response.rating=Number(o),null===document.getElementById("feedbackForm")&&this.createForm()},e.prototype.createForm=function(){var e=this,t=document.createElement("form");t.id="feedbackForm",t.style.marginTop="20px",t.style.display="flex",t.style.flexDirection="column";var o=document.createElement("textarea");o.id="feedbackText",o.required=!0,Object.assign(o.style,{width:"100%",height:"100px",padding:"8px",boxSizing:"border-box",border:"2px solid #ccc",borderRadius:"4px",backgroundColor:"#f8f8f8",fontSize:"16px",resize:"none"});var a=document.createElement("button");a.type="submit",a.textContent="Submit",Object.assign(a.style,{marginTop:"16px",backgroundColor:"#4CAF50",border:"none",color:"white",padding:"6px 16px",textAlign:"center",fontWeight:"600",textDecoration:"none",display:"inline-block",fontSize:"16px",borderRadius:"6px",maxHeight:"48px"}),t.appendChild(o),t.appendChild(a),t.addEventListener("submit",(function(t){var o;t.preventDefault(),n.response.feedbackText=null===(o=document.querySelector("#feedbackText"))||void 0===o?void 0:o.value,e.handleFeedbackFormSubmit()})),this.emojiFormContainer.appendChild(t)},e.prototype.handleFeedbackFormSubmit=function(){this.postResponse()},e.prototype.postResponse=function(){return t(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch("/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if(!t.sent().ok)throw new Error("Error submitting feedback");return"localhost:3000"===window.location.host&&console.log("Feedback submitted successfully"),this.createThanksText(),[3,3];case 2:return e=t.sent(),console.error("Error submitting feedback:",e),[3,3];case 3:return[2]}}))}))},e.prototype.createThanksText=function(){var e,t=document.createElement("div");t.style.width="100%",t.style.height="90%",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center";var o=document.createElement("p");o.textContent=this.greetingMessage,o.style.fontSize="20px",t.appendChild(o),this.emojiFormContainer.animate([{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(-10%)"}],{duration:300,easing:"ease-in-out"}),t.animate([{opacity:0,transform:"translateX(5%)"},{opacity:1,transform:"translateX(0)"}],{duration:300,easing:"ease-in-out"}),null===(e=this.emojiFormContainer.parentNode)||void 0===e||e.replaceChild(t,this.emojiFormContainer)},e.prototype.toggle=function(){var e=this;"none"===this.feedbackModal.style.display?(this.feedbackModal.animate([],{duration:600,easing:"ease-in-out"}),this.feedbackModal.style.display="block"):(this.feedbackModal.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(10%)"}],{duration:300,easing:"ease-in-out"}),setTimeout((function(){e.feedbackModal.style.display="none"}),300))},e}();window.EmojiFeedbackWidget=a}})[487]();
//# sourceMappingURL=rating.bundle.js.map